# ğŸš€ DEPLOYMENT GUIDE - KompletnÃ­ nasazenÃ­ modulÃ¡rnÃ­ Quiz App

## ğŸ“‹ PÅ™ehled nasazenÃ­

**Frontend:** GitHub Pages (zdarma)  
**Backend:** Render.com (zdarma tier)  
**Database:** PostgreSQL na Render.com  
**AI:** Monica AI API integrace  

---

## ğŸ¯ KROK 1: PÅ™Ã­prava GitHub Repository

### 1.1 VytvoÅ™enÃ­ repository
```bash
# VytvoÅ™enÃ­ novÃ©ho repository na GitHub
# NÃ¡zev napÅ™.: quiz-modular-app

# LokÃ¡lnÃ­ git setup
git init
git add .
git commit -m "Initial commit - Modular Quiz App"
git branch -M main
git remote add origin https://github.com/YOUR-USERNAME/quiz-modular-app.git
git push -u origin main
```

### 1.2 Organizace souborÅ¯
```
quiz-modular-app/
â”œâ”€â”€ frontend/           # Pro GitHub Pages
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ pages/         # VÅ¡echny moduly
â”‚   â””â”€â”€ shared/        # SpoleÄnÃ© komponenty
â”œâ”€â”€ backend/           # Pro Render.com
â”‚   â”œâ”€â”€ app.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ render.yaml
â”‚   â””â”€â”€ ...
â””â”€â”€ docs/             # Dokumentace
```

---

## ğŸŒ KROK 2: NasazenÃ­ Frontendu (GitHub Pages)

### 2.1 PÅ™Ã­prava struktury
```bash
# ZkopÃ­rovÃ¡nÃ­ naÅ¡ich modulÅ¯ do frontend/
cp -r modular-app/frontend/* frontend/

# HlavnÃ­ index.html pro GitHub Pages
cp modular-app/frontend/index.html index.html
```

### 2.2 Aktualizace cest v HTML
V `index.html` a vÅ¡ech modulech upravte cesty:
```html
<!-- Z relativnÃ­ch cest -->
<link href="./shared/common.css" rel="stylesheet">

<!-- Na absolutnÃ­ cesty pro GitHub Pages -->
<link href="/quiz-modular-app/frontend/shared/common.css" rel="stylesheet">
```

### 2.3 Aktivace GitHub Pages
1. JdÄ›te na GitHub repository
2. Settings â†’ Pages
3. Source: Deploy from a branch
4. Branch: main / (root)
5. Save

**URL bude:** `https://YOUR-USERNAME.github.io/quiz-modular-app`

---

## ğŸš€ KROK 3: NasazenÃ­ Backendu (Render.com)

### 3.1 Registrace na Render.com
1. JdÄ›te na [render.com](https://render.com)
2. Zaregistrujte se pomocÃ­ GitHub ÃºÄtu
3. Propojte GitHub repository

### 3.2 VytvoÅ™enÃ­ Web Service
1. **New Web Service**
2. **Connect repository:** `quiz-modular-app`
3. **Konfigurace:**
   ```
   Name: quiz-modular-backend
   Region: Frankfurt (FRA)
   Branch: main
   Root Directory: backend
   Runtime: Python 3
   Build Command: pip install -r requirements.txt
   Start Command: gunicorn app:app --bind 0.0.0.0:$PORT --workers 4
   ```

### 3.3 Environment Variables
V Render.com nastavte:
```
FLASK_ENV=production
SECRET_KEY=[auto-generated by Render]
CORS_ORIGINS=https://YOUR-USERNAME.github.io
MONICA_API_KEY=your-monica-api-key-here
```

### 3.4 PostgreSQL Database
1. **New PostgreSQL Database**
2. **Konfigurace:**
   ```
   Name: quiz-modular-db
   Database Name: quiz_modular
   User: quiz_user
   Region: Frankfurt (FRA)
   ```
3. **PropojenÃ­:** Render automaticky nastavÃ­ `DATABASE_URL`

---

## ğŸ”‘ KROK 4: Monica AI Setup

### 4.1 ZÃ­skÃ¡nÃ­ API klÃ­Äe
1. JdÄ›te na [Monica AI](https://monica.im)
2. Zaregistrujte se
3. API â†’ Create API Key
4. ZkopÃ­rujte klÃ­Ä

### 4.2 NastavenÃ­ v Render.com
```
MONICA_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxx
```

---

## ğŸ”§ KROK 5: PropojenÃ­ Frontend â†” Backend

### 5.1 Aktualizace API URL
V `frontend/shared/api-client.js`:
```javascript
detectBackendURL() {
    const hostname = window.location.hostname;
    
    if (hostname === 'localhost' || hostname === '127.0.0.1') {
        return 'http://localhost:5000';  // Development
    } else {
        return 'https://quiz-modular-backend.onrender.com';  // Production
    }
}
```

### 5.2 CORS konfigurace
Backend automaticky povolÃ­ poÅ¾adavky z:
- `https://YOUR-USERNAME.github.io`
- `http://localhost:3000` (development)

---

## âœ… KROK 6: TestovÃ¡nÃ­ nasazenÃ­

### 6.1 Backend test
```bash
# LokÃ¡lnÃ­ test backendu
cd backend
python test_backend.py

# Test produkÄnÃ­ho backendu
python test_backend.py quiz-modular-backend.onrender.com
```

### 6.2 Frontend test
1. OtevÅ™ete `https://YOUR-USERNAME.github.io/quiz-modular-app`
2. Otestujte:
   - âœ… Registrace/pÅ™ihlÃ¡Å¡enÃ­
   - âœ… Quiz moduly
   - âœ… Battle mÃ³d
   - âœ… ÃšstnÃ­ zkouÅ¡ky
   - âœ… Admin panel
   - âœ… NastavenÃ­

### 6.3 API Health Check
```bash
curl https://quiz-modular-backend.onrender.com/api/health
```

**OÄekÃ¡vanÃ½ vÃ½stup:**
```json
{
  "status": "healthy",
  "database": "connected",
  "monica_ai": "enabled",
  "timestamp": "2024-01-01T12:00:00Z",
  "version": "2.0.0-modular"
}
```

---

## ğŸ“Š KROK 7: Monitoring & ÃšdrÅ¾ba

### 7.1 Render.com Dashboard
- **Logs:** Real-time server logs
- **Metrics:** CPU, memory, response times
- **Database:** Connections, queries, storage

### 7.2 Automatic Health Checks
Render automaticky monitoruje:
- `/api/health` endpoint
- HTTP response codes
- Response times

### 7.3 Database Backup
Render automaticky zÃ¡lohuje PostgreSQL databÃ¡zi:
- DennÃ­ automatic backups
- Point-in-time recovery
- Download backups moÅ¾nost

---

## ğŸ› ï¸ KROK 8: BÄ›Å¾nÃ© problÃ©my a Å™eÅ¡enÃ­

### 8.1 CORS chyby
**Problem:** `Access to fetch at 'https://...' from origin 'https://...' has been blocked by CORS policy`

**Å˜eÅ¡enÃ­:**
1. Zkontrolujte `CORS_ORIGINS` v Render environment
2. UjistÄ›te se, Å¾e URL je pÅ™esnÄ› stejnÃ© jako ve frontendu

### 8.2 Database connection errors
**Problem:** `Connection to database failed`

**Å˜eÅ¡enÃ­:**
1. Zkontrolujte PostgreSQL status v Render
2. OvÄ›Å™te `DATABASE_URL` environment variable
3. Restartujte web service

### 8.3 Monica AI errors
**Problem:** `Monica AI request failed`

**Å˜eÅ¡enÃ­:**
1. OvÄ›Å™te `MONICA_API_KEY` validitu
2. Zkontrolujte credit balance
3. Testujte API klÃ­Ä manuÃ¡lnÄ›

### 8.4 Slow cold starts
**Problem:** PrvnÃ­ poÅ¾adavek trvÃ¡ dlouho

**Å˜eÅ¡enÃ­:**
- Render free tier "spÃ­" po neaktivitÄ›
- Upgrade na paid tier pro instant wake
- Nebo pouÅ¾ijte external monitoring service

---

## ğŸ¯ KROK 9: Production Optimalizace

### 9.1 Performance
```yaml
# render.yaml optimalizace
services:
  - type: web
    plan: starter  # Upgrade z free
    numInstances: 2  # Multiple instances
    autoDeploy: false  # ManuÃ¡lnÃ­ deploye
```

### 9.2 Database Optimizations
```python
# app.py optimalizace
app.config['SQLALCHEMY_ENGINE_OPTIONS'] = {
    'pool_size': 20,      # VÃ­ce connections
    'max_overflow': 30,   # Burst capability
    'pool_pre_ping': True # Health checking
}
```

### 9.3 Frontend CDN
PÅ™idejte CDN pro rychlejÅ¡Ã­ loading:
```html
<!-- V hlaviÄce HTML -->
<link rel="dns-prefetch" href="//cdn.jsdelivr.net">
<link rel="preconnect" href="https://quiz-modular-backend.onrender.com">
```

---

## ğŸŒŸ KROK 10: FinÃ¡lnÃ­ checklist

### âœ… Frontend (GitHub Pages)
- [ ] Repository nastaven a public
- [ ] GitHub Pages aktivovÃ¡n
- [ ] VÅ¡echny moduly fungujÃ­
- [ ] API client mÃ¡ sprÃ¡vnÃ© URL
- [ ] Responsive design funguje

### âœ… Backend (Render.com)
- [ ] Web service bÄ›Å¾Ã­
- [ ] PostgreSQL databÃ¡ze pÅ™ipojena
- [ ] Environment variables nastaveny
- [ ] Health check vracÃ­ OK
- [ ] CORS sprÃ¡vnÄ› nakonfigurovÃ¡n

### âœ… Integrace
- [ ] Frontend â†” Backend komunikace
- [ ] Autentifikace funguje
- [ ] Monica AI odpovÃ­dÃ¡
- [ ] Real-time features aktivnÃ­
- [ ] Error handling robust

### âœ… Testing
- [ ] VÅ¡echny moduly otestovÃ¡ny
- [ ] Cross-browser kompatibilita
- [ ] Mobile responsiveness
- [ ] Performance optimalizace
- [ ] Security testing

---

## ğŸ‰ NasazenÃ­ dokonÄeno!

**Frontend URL:** `https://YOUR-USERNAME.github.io/quiz-modular-app`  
**Backend API:** `https://quiz-modular-backend.onrender.com/api`  
**Health Check:** `https://quiz-modular-backend.onrender.com/api/health`  

### Default pÅ™Ã­stupy:
- **Admin:** `admin` / `admin123`
- **Student:** `student` / `student123`

### DalÅ¡Ã­ vÃ½voj:
1. Monitoring & analytics setup
2. Custom domain konfigurace
3. Advanced security features
4. Performance optimalizace
5. A/B testing implementation

**ModulÃ¡rnÃ­ Quiz App je nynÃ­ live v produkci! ğŸš€**
