<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Application - Web Version</title>
    <link rel="stylesheet" href="quiz_styles.css">
    <link rel="stylesheet" href="enhanced_integration.css">
    <script src="api-config.js"></script>
</head>
<body>
    <div id="app">
        <!-- Header s menu -->
        <nav class="menu-bar">
            <div class="menu-left">
                <div id="authButtons">
                    <button class="menu-item" onclick="app.showLoginDialog()" id="loginBtn">P≈ôihl√°sit</button>
                    <button class="menu-item" onclick="app.showRegisterDialog()" id="registerBtn">Registrovat</button>
                    <button class="menu-item" onclick="app.logout()" id="logoutBtn" style="display:none;">Odhl√°sit</button>
                    <span id="userStatus" class="user-status" style="display:none;"></span>
                </div>
                <button class="menu-item" onclick="app.showChangePasswordDialog()" id="changePasswordBtn" disabled>Zmƒõnit heslo</button>
                <button class="menu-item" onclick="app.showResults()" id="resultsBtn" disabled>V√Ωsledky</button>
                <button class="menu-item" onclick="app.showSettings()">Nastaven√≠</button>
                <button class="menu-item oral-exam-btn" onclick="app.showOralExam()" id="oralExamBtn">üé§ √östn√≠ zkou≈°en√≠</button>
            </div>
            <div class="menu-right">
                <button class="menu-item" onclick="app.toggleImageMode()">Re≈æim obr√°zk≈Ø</button>
                <button class="menu-item battle-btn" onclick="app.startBattle()" id="startBattleBtn">Zalo≈æit bitvu</button>
                <button class="menu-item battle-btn" onclick="app.joinBattle()" id="joinBattleBtn">P≈ôipojit se k bitvƒõ</button>
            </div>
        </nav>

        <!-- Status bar -->
        <div class="status-bar">
            <div class="status-left">
                <span id="statusText">Quiz Application - Nep≈ôihl√°≈°en√Ω u≈æivatel (0 odpovƒõd√≠, celkem spr√°vnƒõ 0, celkem ≈°patnƒõ 0)</span>
            </div>
            <div class="status-right">
                <div class="server-status" id="serverStatus">
                    <span class="status-indicator" id="statusIndicator">üî¥</span>
                    <span class="status-text" id="statusIndicatorText">Offline</span>
                    <span class="status-mode" id="statusMode">Local Mode</span>
                </div>
            </div>
        </div>

        <!-- Leaderboard -->
        <div class="leaderboard">
            <h3>≈Ωeb≈ô√≠ƒçek nejlep≈°√≠ch:</h3>
            <div id="leaderboard-list">
                <div class="leaderboard-item">ü•á Naƒç√≠t√°n√≠...</div>
                <div class="leaderboard-item">ü•à</div>
                <div class="leaderboard-item">ü•â</div>
            </div>
        </div>

        <!-- Battle Score Widget (skryt√© ve v√Ωchoz√≠m stavu) -->
        <div id="battleScoreWidget" class="battle-score-widget hidden">
            <h3>Sk√≥re bitvy:</h3>
            <div id="battleScores"></div>
            <div class="battle-timer">
                <span id="battleTimeText">ƒåas: 00:00</span>
                <div class="time-progress-bar">
                    <div id="timeProgressFill" class="time-progress-fill"></div>
                </div>
            </div>
        </div>

        <!-- Debug section -->
        <div class="debug-panel" id="debugPanel" style="display: none;">
            <div class="debug-header">
                <h3>Debug Log</h3>
                <button type="button" onclick="toggleDebugPanel()" class="debug-toggle">Zav≈ô√≠t</button>
            </div>
            <div class="debug-content">
                <div class="debug-controls">
                    <button type="button" onclick="clearDebugLog()" class="debug-clear">Vymazat log</button>
                    <label>
                        <input type="checkbox" id="autoScrollDebug" checked> Auto-scroll
                    </label>
                </div>
                <div class="debug-log" id="debugLog">
                    <div class="debug-entry system">Debug panel inicializov√°n</div>
                </div>
            </div>
        </div>

        <!-- Main content -->
        <div class="main-content">
            <!-- Navigation controls -->
            <div class="nav-controls">
                <select id="tableCombo" onchange="app.onTableSelected(this.value)" disabled>
                    <option value="">Vyberte tabulku...</option>
                </select>
                
                <button onclick="app.startQuiz()" id="startQuizBtn" class="start-quiz-button" disabled>‚ñ∂ Spustit kv√≠z</button>
                
                <button onclick="app.prevQuestion()" id="backBtn" disabled>Zpƒõt</button>
                <button onclick="app.nextQuestion()" id="forwardBtn" disabled>Vp≈ôed</button>
                <button onclick="app.randomQuestion()" id="randomBtn" disabled>Random</button>
                <button onclick="app.toggleHardMode()" id="hardBtn" disabled>Hard</button>
                <button onclick="app.loadQuestionsFile()" id="loadBtn" disabled>Naƒç√≠st soubor</button>
                <button onclick="app.markIncorrect()" id="incorrectBtn" disabled>Oznaƒçit jako chybnou</button>
                <button onclick="endTestConfirm()" id="endTestBtn" class="end-test-button" disabled>Ukonƒçit test</button>
                <button onclick="toggleDebugPanel()" id="debugToggleBtn" class="debug-button">üîç Debug</button>
                
                <label class="hint-checkbox">
                    <input type="checkbox" id="hintCheckbox" onchange="app.toggleHint(this.checked)" disabled>
                    N√°povƒõda
                </label>
            </div>

            <!-- Question display -->
            <div class="question-section">
                <div class="question-header">
                    <span id="questionCount">Ot√°zka: 0/0</span>
                    <span id="score">Spr√°vnƒõ: 0 ≈†patnƒõ: 0</span>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                </div>

                <div id="questionText" class="question-text" disabled>
                    Vyberte tabulku a p≈ôihlaste se pro zaƒç√°tek kv√≠zu.
                </div>

                <div class="answers-section">
                    <div class="answer-option" id="answerA" onclick="app.checkAnswer('A')">
                        <span class="answer-letter">A)</span>
                        <span class="answer-text">Odpovƒõƒè A</span>
                    </div>
                    <div class="answer-option" id="answerB" onclick="app.checkAnswer('B')">
                        <span class="answer-letter">B)</span>
                        <span class="answer-text">Odpovƒõƒè B</span>
                    </div>
                    <div class="answer-option" id="answerC" onclick="app.checkAnswer('C')">
                        <span class="answer-letter">C)</span>
                        <span class="answer-text">Odpovƒõƒè C</span>
                    </div>
                </div>

                <div id="correctAnswerHint" class="correct-answer-hint hidden">
                    Spr√°vn√° odpovƒõƒè: 
                </div>

                <div id="explanation" class="explanation hidden">
                    <strong>Vysvƒõtlen√≠:</strong> <span id="explanationText"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal dialogs -->
    <div id="loginModal" class="modal hidden">
        <div class="modal-content">
            <h2>P≈ôihl√°≈°en√≠</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginUsername">U≈æivatelsk√© jm√©no:</label>
                    <input type="text" id="loginUsername" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Heslo:</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <div class="form-buttons">
                    <button type="submit">P≈ôihl√°sit</button>
                    <button type="button" onclick="app.closeModal('loginModal')">Zru≈°it</button>
                </div>
            </form>
        </div>
    </div>

    <div id="registerModal" class="modal hidden">
        <div class="modal-content">
            <h2>Registrace</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerUsername">U≈æivatelsk√© jm√©no:</label>
                    <input type="text" id="registerUsername" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Heslo:</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-buttons">
                    <button type="submit">Registrovat</button>
                    <button type="button" onclick="app.closeModal('registerModal')">Zru≈°it</button>
                </div>
            </form>
        </div>
    </div>

    <div id="changePasswordModal" class="modal hidden">
        <div class="modal-content">
            <h2>Zmƒõna hesla</h2>
            <form id="changePasswordForm">
                <div class="form-group">
                    <label for="currentPassword">Souƒçasn√© heslo:</label>
                    <input type="password" id="currentPassword" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">Nov√© heslo:</label>
                    <input type="password" id="newPassword" required>
                </div>
                <div class="form-buttons">
                    <button type="submit">Zmƒõnit</button>
                    <button type="button" onclick="app.closeModal('changePasswordModal')">Zru≈°it</button>
                </div>
            </form>
        </div>
    </div>

    <div id="settingsModal" class="modal hidden">
        <div class="modal-content" style="max-height: 80vh; overflow-y: auto;">
            <h2>Nastaven√≠</h2>
            <form id="settingsForm">
                <div class="form-group">
                    <label for="maxQuestionFontSize">Max. velikost p√≠sma ot√°zky:</label>
                    <input type="number" id="maxQuestionFontSize" min="12" max="48" value="28">
                </div>
                <div class="form-group">
                    <label for="maxAnswerFontSize">Max. velikost p√≠sma odpovƒõdi:</label>
                    <input type="number" id="maxAnswerFontSize" min="12" max="36" value="26">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="showOnlyUnanswered">
                        Zobrazit pouze nezodpovƒõzen√© ot√°zky
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="useTestDb">
                        Pou≈æ√≠t testovac√≠ datab√°zi
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="shuffleAnswers">
                        M√≠cha≈• odpovƒõdi A, B, C (proti zapamatov√°n√≠ vzor≈Ø)
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="randomOrder">
                        N√°hodn√© po≈ôad√≠ ot√°zek
                    </label>
                </div>
                <div class="form-group">
                    <label for="backendMode">Re≈æim backend:</label>
                    <select id="backendMode" onchange="app.checkServerAvailability()">
                        <option value="server">Serverov√° verze (Produkce)</option>
                        <option value="local">Lok√°ln√≠ verze (Development)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="serverUrl">URL serveru:</label>
                    <input type="text" id="serverUrl" placeholder="https://quiz-web-app-wpls.onrender.com" value="https://quiz-web-app-wpls.onrender.com">
                </div>
                <div class="form-group">
                    <div id="serverStatus" class="server-status">
                        <span id="serverStatusText">Kontroluji dostupnost serveru...</span>
                        <button type="button" id="refreshServerBtn" onclick="app.checkServerAvailability()" style="margin-left: 10px;">Obnovit</button>
                    </div>
                </div>
                <div class="form-buttons" style="position: sticky; bottom: 0; background: white; padding: 10px 0; border-top: 1px solid #ddd;">
                    <button type="submit">Ulo≈æit</button>
                    <button type="button" onclick="app.closeModal('settingsModal')">Zru≈°it</button>
                </div>
            </form>
        </div>
    </div>

    <div id="battleSetupModal" class="modal hidden">
        <div class="modal-content">
            <h2>Nastaven√≠ bitvy</h2>
            <form id="battleSetupForm">
                <div class="form-group">
                    <label for="battleTable">Tabulka:</label>
                    <select id="battleTable" required>
                        <option value="">Vyberte tabulku...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="battleQuestionCount">Poƒçet ot√°zek:</label>
                    <input type="number" id="battleQuestionCount" min="5" max="50" value="20">
                </div>
                <div class="form-group">
                    <label for="battleTimeLimit">ƒåasov√Ω limit (minuty):</label>
                    <input type="number" id="battleTimeLimit" min="1" max="60" value="10">
                </div>
                <div class="form-group">
                    <label for="battlePlayerCount">Poƒçet hr√°ƒç≈Ø:</label>
                    <input type="number" id="battlePlayerCount" min="2" max="8" value="2">
                </div>
                <div class="form-buttons">
                    <button type="submit">Zalo≈æit bitvu</button>
                    <button type="button" onclick="app.closeModal('battleSetupModal')">Zru≈°it</button>
                </div>
            </form>
        </div>
    </div>

    <script src="quiz_data.js"></script>
    <script src="security_improvements.js"></script>
    <script src="ux_improvements.js"></script>
    <script src="data_management.js"></script>
    <script src="accessibility.js"></script>
    <script src="statistics.js"></script>
    <script src="oral_exam_system.js"></script>
    <script src="quiz_app.js"></script>
    <script src="enhanced_integration.js"></script>
    <link rel="stylesheet" href="advanced_styles.css">
    <link rel="stylesheet" href="oral_exam_styles.css">
</body>
</html>
