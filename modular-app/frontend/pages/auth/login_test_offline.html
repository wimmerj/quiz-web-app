<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Offline Test</title>
    <link rel="stylesheet" href="../../shared/common.css">
    <link rel="stylesheet" href="login.css">
    
    <style>
        /* Test specific styles */
        .test-overlay {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            font-size: 0.8rem;
            z-index: 10000;
            max-width: 300px;
        }
        
        .test-overlay h4 {
            margin: 0 0 0.5rem 0;
            color: #ff5722;
        }
        
        .test-changes {
            background: rgba(255, 87, 34, 0.1);
            border: 1px solid rgba(255, 87, 34, 0.3);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            color: white;
        }
        
        .change-item {
            margin: 0.5rem 0;
            padding: 0.3rem 0;
            border-left: 3px solid #ff5722;
            padding-left: 0.5rem;
        }
        
        .demo-highlight {
            animation: highlight 2s ease-in-out infinite;
        }
        
        @keyframes highlight {
            0%, 100% { background: rgba(255, 87, 34, 0.1); }
            50% { background: rgba(255, 87, 34, 0.3); }
        }
    </style>
</head>
<body class="no-navigation no-breadcrumb">
    <!-- Test info overlay -->
    <div class="test-overlay">
        <h4>ğŸ§ª OFFLINE TEST MODE</h4>
        <p><strong>ZmÄ›ny k testovÃ¡nÃ­:</strong></p>
        <ul style="font-size: 0.7rem; margin: 0.5rem 0; padding-left: 1rem;">
            <li>Demo ÃºÄty: delÅ¡Ã­ hesla</li>
            <li>PodmÃ­nky: GDPR modal</li>
            <li>Reset: 2 varianty</li>
            <li>Email: povinnÃ½</li>
            <li>Redirect: na dashboard</li>
        </ul>
    </div>

    <div class="auth-container">
        <div class="auth-header">
            <h1>ğŸ¯ Quiz App</h1>
            <p>ModulÃ¡rnÃ­ verze s vylepÅ¡enou architekturou</p>
            <a href="../../index.html" class="back-link">â† ZpÄ›t na hlavnÃ­ strÃ¡nku</a>
        </div>

        <div class="test-changes">
            <h3>ğŸ”§ AktuÃ¡lnÄ› testovanÃ© zmÄ›ny:</h3>
            <div class="change-item">âœ… <strong>Demo ÃºÄty:</strong> Bez admin, silnÃ¡ hesla (8+ znakÅ¯)</div>
            <div class="change-item">ğŸ“‹ <strong>PodmÃ­nky:</strong> GDPR modal s plnÃ½m obsahem</div>
            <div class="change-item">ğŸ”‘ <strong>Reset hesla:</strong> 2 varianty (zapomenutÃ­ vs zmÄ›na)</div>
            <div class="change-item">ğŸ“§ <strong>Email povinnÃ½:</strong> Pro reset hesla</div>
            <div class="change-item">ğŸ  <strong>Redirect:</strong> Po login na dashboard index.html</div>
        </div>

        <div class="auth-tabs">
            <button class="auth-tab active" data-tab="login">PÅ™ihlÃ¡Å¡enÃ­</button>
            <button class="auth-tab" data-tab="register">Registrace</button>
            <button class="auth-tab" data-tab="reset">Reset hesla</button>
        </div>

        <!-- LOGIN FORM -->
        <div id="login-form" class="auth-form active">
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ” PÅ™ihlÃ¡Å¡enÃ­</h2>
                    <p class="card-subtitle">PÅ™ihlaste se ke svÃ©mu ÃºÄtu</p>
                </div>

                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginUsername" class="form-label">UÅ¾ivatelskÃ© jmÃ©no</label>
                        <input 
                            type="text" 
                            id="loginUsername" 
                            class="form-input" 
                            required 
                            minlength="3"
                            maxlength="20"
                            placeholder="Zadejte svÃ© uÅ¾ivatelskÃ© jmÃ©no"
                        >
                    </div>

                    <div class="form-group">
                        <label for="loginPassword" class="form-label">Heslo</label>
                        <input 
                            type="password" 
                            id="loginPassword" 
                            class="form-input" 
                            required 
                            minlength="6"
                            placeholder="Zadejte svÃ© heslo"
                        >
                    </div>

                    <button type="submit" class="btn btn-large" style="width: 100%">
                        PÅ™ihlÃ¡sit se
                    </button>
                </form>

                <div class="auth-demo demo-highlight">
                    <h4>Demo ÃºÄty pro testovÃ¡nÃ­:</h4>
                    <div class="demo-accounts">
                        <button class="btn btn-small btn-outline demo-btn" data-username="testuser" data-password="testpass123">
                            ğŸ‘¤ Test User
                        </button>
                        <button class="btn btn-small btn-outline demo-btn" data-username="student" data-password="student2024">
                            ğŸ“ Student
                        </button>
                        <button class="btn btn-small btn-outline demo-btn" data-username="demo" data-password="demouser2024">
                            ğŸ¯ Demo
                        </button>
                    </div>
                    <div style="background: rgba(76, 175, 80, 0.1); padding: 0.5rem; border-radius: 5px; margin-top: 0.5rem;">
                        <small>âœ… <strong>ZmÄ›na:</strong> DelÅ¡Ã­ hesla (8-13 znakÅ¯), Å¾Ã¡dnÃ½ admin ÃºÄet</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- REGISTER FORM -->
        <div id="register-form" class="auth-form">
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ“ Registrace</h2>
                    <p class="card-subtitle">VytvoÅ™te si novÃ½ ÃºÄet</p>
                </div>

                <form id="registerForm">
                    <div class="form-group">
                        <label for="registerUsername" class="form-label">UÅ¾ivatelskÃ© jmÃ©no</label>
                        <input 
                            type="text" 
                            id="registerUsername" 
                            class="form-input" 
                            required 
                            minlength="3"
                            maxlength="20"
                            pattern="[a-zA-Z0-9_]+"
                            placeholder="3-20 znakÅ¯, pouze pÃ­smena, ÄÃ­slice a podtrÅ¾Ã­tka"
                        >
                        <small class="form-help">Pouze pÃ­smena, ÄÃ­slice a podtrÅ¾Ã­tka</small>
                    </div>

                    <div class="form-group">
                        <label for="registerEmail" class="form-label">Email <span style="color: #ff5722;">*</span></label>
                        <input 
                            type="email" 
                            id="registerEmail" 
                            class="form-input" 
                            required
                            placeholder="vas@email.com"
                        >
                        <small class="form-help" style="color: #ff5722;">
                            âœ… <strong>ZmÄ›na:</strong> Email je nynÃ­ povinnÃ½ pro reset hesla
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="registerPassword" class="form-label">Heslo</label>
                        <input 
                            type="password" 
                            id="registerPassword" 
                            class="form-input" 
                            required 
                            minlength="6"
                            placeholder="AlespoÅˆ 6 znakÅ¯"
                        >
                    </div>

                    <div class="form-group">
                        <label for="registerPasswordConfirm" class="form-label">PotvrzenÃ­ hesla</label>
                        <input 
                            type="password" 
                            id="registerPasswordConfirm" 
                            class="form-input" 
                            required 
                            placeholder="Zadejte heslo znovu"
                        >
                    </div>

                    <div class="form-group demo-highlight">
                        <label class="checkbox-label">
                            <input type="checkbox" id="agreeTerms" required> 
                            SouhlasÃ­m s <a href="#" data-navigate="terms" style="color: #ff5722;">podmÃ­nkami pouÅ¾itÃ­</a>
                        </label>
                        <div style="background: rgba(76, 175, 80, 0.1); padding: 0.5rem; border-radius: 5px; margin-top: 0.5rem;">
                            <small>âœ… <strong>ZmÄ›na:</strong> KliknutÃ­m otevÅ™ete GDPR compliant podmÃ­nky</small>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-large" style="width: 100%">
                        Zaregistrovat se
                    </button>
                </form>
            </div>
        </div>

        <!-- RESET FORM -->
        <div id="reset-form" class="auth-form">
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ”‘ Reset hesla</h2>
                    <p class="card-subtitle">Obnovte si zapomenutÃ© heslo nebo ho zmÄ›Åˆte</p>
                </div>

                <!-- Reset Type Selection -->
                <div class="reset-type-selection demo-highlight">
                    <h4>Vyberte typ reset hesla:</h4>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="resetType" value="forgot" checked>
                            <span class="radio-custom"></span>
                            ğŸ¤” ZapomnÄ›l jsem heslo
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="resetType" value="change">
                            <span class="radio-custom"></span>
                            ğŸ”„ Chci zmÄ›nit heslo
                        </label>
                    </div>
                    <div style="background: rgba(76, 175, 80, 0.1); padding: 0.5rem; border-radius: 5px; margin-top: 0.5rem;">
                        <small>âœ… <strong>ZmÄ›na:</strong> 2 varianty - zapomenutÃ© vs zmÄ›na hesla</small>
                    </div>
                </div>

                <!-- Forgot Password Form -->
                <div id="forgot-password-form">
                    <form id="forgotPasswordForm">
                        <div class="form-group">
                            <label for="resetEmail" class="form-label">Email nebo uÅ¾ivatelskÃ© jmÃ©no</label>
                            <input 
                                type="text" 
                                id="resetEmail" 
                                class="form-input" 
                                required 
                                placeholder="Zadejte email nebo uÅ¾ivatelskÃ© jmÃ©no"
                            >
                        </div>

                        <button type="submit" class="btn btn-large" style="width: 100%">
                            Odeslat reset link
                        </button>
                    </form>

                    <div class="notification notification-info">
                        <strong>Info:</strong> Reset link bude odeslÃ¡n na vÃ¡Å¡ email.
                    </div>
                </div>

                <!-- Change Password Form -->
                <div id="change-password-form" style="display: none;">
                    <form id="changePasswordForm">
                        <div class="form-group">
                            <label for="currentUsername" class="form-label">UÅ¾ivatelskÃ© jmÃ©no</label>
                            <input 
                                type="text" 
                                id="currentUsername" 
                                class="form-input" 
                                required 
                                placeholder="VaÅ¡e uÅ¾ivatelskÃ© jmÃ©no"
                            >
                        </div>

                        <div class="form-group">
                            <label for="currentPassword" class="form-label">SouÄasnÃ© heslo</label>
                            <input 
                                type="password" 
                                id="currentPassword" 
                                class="form-input" 
                                required 
                                placeholder="Zadejte souÄasnÃ© heslo"
                            >
                        </div>

                        <div class="form-group">
                            <label for="newPassword" class="form-label">NovÃ© heslo</label>
                            <input 
                                type="password" 
                                id="newPassword" 
                                class="form-input" 
                                required 
                                minlength="6"
                                placeholder="AlespoÅˆ 6 znakÅ¯"
                            >
                        </div>

                        <div class="form-group">
                            <label for="newPasswordConfirm" class="form-label">PotvrzenÃ­ novÃ©ho hesla</label>
                            <input 
                                type="password" 
                                id="newPasswordConfirm" 
                                class="form-input" 
                                required 
                                placeholder="Zadejte novÃ© heslo znovu"
                            >
                        </div>

                        <button type="submit" class="btn btn-large" style="width: 100%">
                            ZmÄ›nit heslo
                        </button>
                    </form>

                    <div class="notification notification-warning">
                        <strong>Pozor:</strong> Po zmÄ›nÄ› hesla budete odhlÃ¡Å¡eni ze vÅ¡ech zaÅ™Ã­zenÃ­.
                    </div>
                </div>
            </div>
        </div>

        <!-- TERMS OF SERVICE MODAL -->
        <div id="termsModal" class="modal-overlay" style="display: none;">
            <div class="modal demo-highlight">
                <div class="modal-header">
                    <h3>ğŸ“‹ PodmÃ­nky pouÅ¾itÃ­ a ochrana osobnÃ­ch ÃºdajÅ¯</h3>
                    <button class="modal-close" id="closeTermsModal">&times;</button>
                </div>
                <div class="modal-content">
                    <div class="terms-content">
                        <div style="background: rgba(76, 175, 80, 0.1); padding: 1rem; border-radius: 10px; margin-bottom: 1rem;">
                            <p style="margin: 0; font-weight: 600; color: #4caf50;">âœ… ZmÄ›na: PlnÄ› GDPR compliant podmÃ­nky</p>
                        </div>
                        
                        <h4>ğŸ¯ O aplikaci</h4>
                        <p>Toto je <strong>testovacÃ­ verze</strong> modulÃ¡rnÃ­ quizovÃ© aplikace vytvoÅ™enÃ© pro vzdÄ›lÃ¡vacÃ­ a demonstraÄnÃ­ ÃºÄely. Aplikace nenÃ­ dokonÄenÃ¡ a mÅ¯Å¾e obsahovat chyby nebo nedokonÄenÃ© funkcionality.</p>
                        
                        <h4>ğŸ”’ Ochrana osobnÃ­ch ÃºdajÅ¯ (GDPR)</h4>
                        <ul>
                            <li><strong>ZpracovÃ¡nÃ­ dat:</strong> ZpracovÃ¡vÃ¡me pouze Ãºdaje nezbytnÃ© pro fungovÃ¡nÃ­ aplikace</li>
                            <li><strong>BezpeÄnost:</strong> Hesla jsou hashovÃ¡na pomocÃ­ modernÃ­ch kryptografickÃ½ch metod</li>
                            <li><strong>SdÃ­lenÃ­:</strong> VaÅ¡e data nesdÃ­lÃ­me s tÅ™etÃ­mi stranami</li>
                            <li><strong>PrÃ¡va:</strong> MÃ¡te prÃ¡vo na pÅ™Ã­stup, opravu nebo smazÃ¡nÃ­ svÃ½ch dat</li>
                        </ul>
                        
                        <h4>âš ï¸ TestovacÃ­ verze - omezenÃ­</h4>
                        <ul>
                            <li>Aplikace je ve vÃ½voji a mÅ¯Å¾e bÃ½t kdykoli zmÄ›nÄ›na</li>
                            <li>Data mohou bÃ½t pÅ™i aktualizacÃ­ch ztracena</li>
                            <li>NeruÄÃ­me za spolehlivost Äi dostupnost sluÅ¾by</li>
                        </ul>
                        
                        <div class="terms-footer">
                            <p><strong>PoslednÃ­ aktualizace:</strong> 7. srpna 2025</p>
                            <p><em>RegistracÃ­ souhlasÃ­te s tÄ›mito podmÃ­nkami a se zpracovÃ¡nÃ­m osobnÃ­ch ÃºdajÅ¯ v souladu s GDPR.</em></p>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-outline" id="declineTerms">NesouhlasÃ­m</button>
                    <button class="btn btn-primary" id="acceptTerms">SouhlasÃ­m s podmÃ­nkami</button>
                </div>
            </div>
        </div>

        <!-- STATUS SECTION -->
        <div class="auth-status">
            <div class="server-status demo-highlight">
                <span class="status-indicator">ğŸ§ª OFFLINE TEST MODE</span>
                <div style="background: rgba(255, 87, 34, 0.1); padding: 0.5rem; border-radius: 5px; margin-top: 0.5rem;">
                    <small>Po ÃºspÄ›Å¡nÃ©m login: redirect na <strong>index.html</strong> (dashboard)</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Demo JavaScript pro testovÃ¡nÃ­ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ§ª OFFLINE LOGIN TEST MODE');
            
            // Demo tab switching
            document.querySelectorAll('.auth-tab').forEach(tab => {
                tab.addEventListener('click', (e) => {
                    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
                    
                    e.target.classList.add('active');
                    document.getElementById(e.target.dataset.tab + '-form').classList.add('active');
                });
            });
            
            // Demo reset type switching
            document.querySelectorAll('input[name="resetType"]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    if (e.target.value === 'forgot') {
                        document.getElementById('forgot-password-form').style.display = 'block';
                        document.getElementById('change-password-form').style.display = 'none';
                    } else {
                        document.getElementById('forgot-password-form').style.display = 'none';
                        document.getElementById('change-password-form').style.display = 'block';
                    }
                });
            });
            
            // Demo credentials buttons
            document.querySelectorAll('.demo-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const username = e.target.dataset.username;
                    const password = e.target.dataset.password;
                    
                    document.getElementById('loginUsername').value = username;
                    document.getElementById('loginPassword').value = password;
                    
                    console.log(`Demo credentials filled: ${username} / ${password}`);
                });
            });
            
            // Terms modal
            const termsLink = document.querySelector('[data-navigate="terms"]');
            const termsModal = document.getElementById('termsModal');
            const closeModalBtn = document.getElementById('closeTermsModal');
            const acceptBtn = document.getElementById('acceptTerms');
            const declineBtn = document.getElementById('declineTerms');
            const agreeCheckbox = document.getElementById('agreeTerms');
            
            termsLink?.addEventListener('click', (e) => {
                e.preventDefault();
                termsModal.style.display = 'flex';
            });
            
            closeModalBtn?.addEventListener('click', () => {
                termsModal.style.display = 'none';
            });
            
            acceptBtn?.addEventListener('click', () => {
                agreeCheckbox.checked = true;
                termsModal.style.display = 'none';
                alert('âœ… Souhlasili jste s podmÃ­nkami pouÅ¾itÃ­');
            });
            
            declineBtn?.addEventListener('click', () => {
                agreeCheckbox.checked = false;
                termsModal.style.display = 'none';
                alert('âš ï¸ Pro registraci je nutnÃ½ souhlas s podmÃ­nkami');
            });
            
            // Mock form submissions
            document.getElementById('loginForm')?.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('âœ… DEMO: Po ÃºspÄ›Å¡nÃ©m pÅ™ihlÃ¡Å¡enÃ­ â†’ redirect na index.html (dashboard)');
            });
            
            document.getElementById('registerForm')?.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('âœ… DEMO: Email je nynÃ­ povinnÃ½ pro registraci');
            });
            
            document.getElementById('forgotPasswordForm')?.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('âœ… DEMO: Reset link byl odeslÃ¡n na email');
            });
            
            document.getElementById('changePasswordForm')?.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('âœ… DEMO: Heslo bylo zmÄ›nÄ›no');
            });
            
            console.log('ğŸ“‹ Test changes loaded:');
            console.log('1. Demo accounts: stronger passwords, no admin');
            console.log('2. Terms: GDPR modal');
            console.log('3. Reset: 2 variants (forgot/change)');
            console.log('4. Email: required for registration');
            console.log('5. Redirect: to dashboard after login');
        });
    </script>
</body>
</html>
