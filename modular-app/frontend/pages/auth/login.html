<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P≈ôihl√°≈°en√≠ - Quiz App</title>
    <link rel="stylesheet" href="../../shared/common.css">
    <link rel="stylesheet" href="login.css">
</head>
<body class="no-navigation no-breadcrumb">
    <div class="auth-container">
        <div class="auth-header">
            <h1>üéØ Quiz App</h1>
            <p>Modul√°rn√≠ verze s vylep≈°enou architekturou</p>
            <a href="../../index.html" class="back-link">‚Üê Zpƒõt na hlavn√≠ str√°nku</a>
        </div>

        <div class="auth-tabs">
            <button class="auth-tab active" data-tab="login">P≈ôihl√°≈°en√≠</button>
            <button class="auth-tab" data-tab="register">Registrace</button>
            <button class="auth-tab" data-tab="reset">Reset hesla</button>
        </div>

        <!-- LOGIN FORM -->
        <div id="login-form" class="auth-form active">
            <div class="card">
                <div class="card-header">
                    <h2>üîê P≈ôihl√°≈°en√≠</h2>
                    <p class="card-subtitle">P≈ôihlaste se ke sv√©mu √∫ƒçtu</p>
                </div>

                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginUsername" class="form-label">U≈æivatelsk√© jm√©no</label>
                        <input 
                            type="text" 
                            id="loginUsername" 
                            class="form-input" 
                            required 
                            minlength="3"
                            maxlength="20"
                            placeholder="Zadejte sv√© u≈æivatelsk√© jm√©no"
                        >
                    </div>

                    <div class="form-group">
                        <label for="loginPassword" class="form-label">Heslo</label>
                        <input 
                            type="password" 
                            id="loginPassword" 
                            class="form-input" 
                            required 
                            minlength="6"
                            placeholder="Zadejte sv√© heslo"
                        >
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="rememberMe"> 
                            Zapamatovat si p≈ôihl√°≈°en√≠
                        </label>
                    </div>

                    <button type="submit" class="btn btn-large" style="width: 100%">
                        P≈ôihl√°sit se
                    </button>
                </form>

                <div class="auth-demo">
                    <h4>Demo √∫ƒçty pro testov√°n√≠:</h4>
                    <div class="demo-accounts">
                        <button class="btn btn-small btn-outline demo-btn" data-username="testuser" data-password="testpass123">
                            ÔøΩ Test User
                        </button>
                        <button class="btn btn-small btn-outline demo-btn" data-username="student" data-password="student2024">
                            üéì Student
                        </button>
                        <button class="btn btn-small btn-outline demo-btn" data-username="demo" data-password="demouser2024">
                            üéØ Demo
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- REGISTER FORM -->
        <div id="register-form" class="auth-form">
            <div class="card">
                <div class="card-header">
                    <h2>üìù Registrace</h2>
                    <p class="card-subtitle">Vytvo≈ôte si nov√Ω √∫ƒçet</p>
                </div>

                <form id="registerForm">
                    <div class="form-group">
                        <label for="registerUsername" class="form-label">U≈æivatelsk√© jm√©no</label>
                        <input 
                            type="text" 
                            id="registerUsername" 
                            class="form-input" 
                            required 
                            minlength="3"
                            maxlength="20"
                            pattern="[a-zA-Z0-9_]+"
                            placeholder="3-20 znak≈Ø, pouze p√≠smena, ƒç√≠slice a podtr≈æ√≠tka"
                        >
                        <small class="form-help">Pouze p√≠smena, ƒç√≠slice a podtr≈æ√≠tka</small>
                    </div>

                    <div class="form-group">
                        <label for="registerEmail" class="form-label">Email *</label>
                        <input 
                            type="email" 
                            id="registerEmail" 
                            class="form-input" 
                            required
                            placeholder="vas@email.com"
                        >
                        <small class="form-help">Povinn√Ω pro reset hesla a notifikace</small>
                    </div>

                    <div class="form-group">
                        <label for="registerPassword" class="form-label">Heslo</label>
                        <input 
                            type="password" 
                            id="registerPassword" 
                            class="form-input" 
                            required 
                            minlength="6"
                            placeholder="Alespo≈à 6 znak≈Ø"
                        >
                    </div>

                    <div class="form-group">
                        <label for="registerPasswordConfirm" class="form-label">Potvrzen√≠_hesla</label>
                        <input 
                            type="password" 
                            id="registerPasswordConfirm" 
                            class="form-input" 
                            required 
                            placeholder="Zadejte heslo znovu"
                        >
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="agreeTerms" required> 
                            Souhlas√≠m s <a href="#" data-navigate="terms">podm√≠nkami pou≈æit√≠</a>
                        </label>
                    </div>

                    <button type="submit" class="btn btn-large btn-secondary" style="width: 100%">
                        Zaregistrovat se
                    </button>
                </form>
            </div>
        </div>

        <!-- RESET PASSWORD FORM -->
        <div id="reset-form" class="auth-form">
            <div class="card">
                <div class="card-header">
                    <h2>üîë Reset hesla</h2>
                    <p class="card-subtitle">Obnovte si zapomenut√© heslo nebo ho zmƒõ≈àte</p>
                </div>

                <!-- Reset Type Selection -->
                <div class="reset-type-selection">
                    <h4>Vyberte typ reset hesla:</h4>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="resetType" value="forgot" checked>
                            <span class="radio-custom"></span>
                            ü§î Zapomnƒõl jsem heslo
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="resetType" value="change">
                            <span class="radio-custom"></span>
                            üîÑ Chci zmƒõnit heslo
                        </label>
                    </div>
                </div>

                <!-- Forgot Password Form -->
                <div id="forgot-password-form">
                    <form id="forgotPasswordForm">
                        <div class="form-group">
                            <label for="resetEmail" class="form-label">Email nebo u≈æivatelsk√© jm√©no</label>
                            <input 
                                type="text" 
                                id="resetEmail" 
                                class="form-input" 
                                required 
                                placeholder="Zadejte email nebo u≈æivatelsk√© jm√©no"
                            >
                        </div>

                        <button type="submit" class="btn btn-large" style="width: 100%">
                            Odeslat reset link
                        </button>
                    </form>

                    <div class="notification notification-info">
                        <strong>Info:</strong> Reset link bude odesl√°n na v√°≈° email.
                    </div>
                </div>

                <!-- Change Password Form -->
                <div id="change-password-form" style="display: none;">
                    <form id="changePasswordForm">
                        <div class="form-group">
                            <label for="currentUsername" class="form-label">U≈æivatelsk√© jm√©no</label>
                            <input 
                                type="text" 
                                id="currentUsername" 
                                class="form-input" 
                                required 
                                placeholder="Va≈°e u≈æivatelsk√© jm√©no"
                            >
                        </div>

                        <div class="form-group">
                            <label for="currentPassword" class="form-label">Souƒçasn√© heslo</label>
                            <input 
                                type="password" 
                                id="currentPassword" 
                                class="form-input" 
                                required 
                                placeholder="Zadejte souƒçasn√© heslo"
                            >
                        </div>

                        <div class="form-group">
                            <label for="newPassword" class="form-label">Nov√© heslo</label>
                            <input 
                                type="password" 
                                id="newPassword" 
                                class="form-input" 
                                required 
                                minlength="6"
                                placeholder="Alespo≈à 6 znak≈Ø"
                            >
                        </div>

                        <div class="form-group">
                            <label for="newPasswordConfirm" class="form-label">Potvrzen√≠ nov√©ho hesla</label>
                            <input 
                                type="password" 
                                id="newPasswordConfirm" 
                                class="form-input" 
                                required 
                                placeholder="Zadejte nov√© heslo znovu"
                            >
                        </div>

                        <button type="submit" class="btn btn-large" style="width: 100%">
                            Zmƒõnit heslo
                        </button>
                    </form>

                    <div class="notification notification-warning">
                        <strong>Pozor:</strong> Po zmƒõnƒõ hesla budete odhl√°≈°eni ze v≈°ech za≈ô√≠zen√≠.
                    </div>
                </div>
            </div>
        </div>

        <!-- TERMS OF SERVICE MODAL -->
        <div id="termsModal" class="modal-overlay" style="display: none;">
            <div class="modal">
                <div class="modal-header">
                    <h3>üìã Podm√≠nky pou≈æit√≠ a ochrana osobn√≠ch √∫daj≈Ø</h3>
                    <button class="modal-close" id="closeTermsModal">&times;</button>
                </div>
                <div class="modal-content">
                    <div class="terms-content">
                        <h4>üéØ O aplikaci</h4>
                        <p>Toto je <strong>testovac√≠ verze</strong> modul√°rn√≠ quizov√© aplikace vytvo≈ôen√© pro vzdƒõl√°vac√≠ a demonstraƒçn√≠ √∫ƒçely. Aplikace nen√≠ dokonƒçen√° a m≈Ø≈æe obsahovat chyby nebo nedokonƒçen√© funkcionality.</p>
                        
                        <h4>üîí Ochrana osobn√≠ch √∫daj≈Ø (GDPR)</h4>
                        <ul>
                            <li><strong>Zpracov√°n√≠ dat:</strong> Zpracov√°v√°me pouze √∫daje nezbytn√© pro fungov√°n√≠ aplikace (u≈æivatelsk√© jm√©no, email, hesla v zahashovan√© podobƒõ, v√Ωsledky kv√≠z≈Ø)</li>
                            <li><strong>√öƒçel:</strong> Data pou≈æ√≠v√°me pouze pro poskytov√°n√≠ funkc√≠ quizov√© aplikace a sledov√°n√≠ pokroku</li>
                            <li><strong>Bezpeƒçnost:</strong> Hesla jsou hashov√°na pomoc√≠ modern√≠ch kryptografick√Ωch metod</li>
                            <li><strong>Cookies:</strong> Pou≈æ√≠v√°me pouze technick√© cookies pro udr≈æen√≠ p≈ôihl√°≈°en√≠</li>
                            <li><strong>Sd√≠len√≠:</strong> Va≈°e data nesd√≠l√≠me s t≈ôet√≠mi stranami</li>
                            <li><strong>Pr√°va:</strong> M√°te pr√°vo na p≈ô√≠stup, opravu nebo smaz√°n√≠ sv√Ωch dat</li>
                        </ul>
                        
                        <h4>‚ö†Ô∏è Testovac√≠ verze - omezen√≠</h4>
                        <ul>
                            <li>Aplikace je ve v√Ωvoji a m≈Ø≈æe b√Ωt kdykoli zmƒõnƒõna nebo nedostupn√°</li>
                            <li>Nƒõkter√© funkce mohou b√Ωt nefunkƒçn√≠ nebo experiment√°ln√≠</li>
                            <li>Data mohou b√Ωt p≈ôi aktualizac√≠ch ztracena nebo resetov√°na</li>
                            <li>Neruƒç√≠me za spolehlivost ƒçi dostupnost slu≈æby</li>
                        </ul>
                        
                        <h4>üõ°Ô∏è Zabezpeƒçen√≠ a odpovƒõdnost</h4>
                        <ul>
                            <li>Pou≈æ√≠vejte siln√° hesla a nesd√≠lejte sv√© p≈ôihla≈°ovac√≠ √∫daje</li>
                            <li>Nepou≈æ√≠vejte citliv√© nebo osobn√≠ informace v u≈æivatelsk√Ωch jm√©nech</li>
                            <li>Za bezpeƒçnost va≈°ich p≈ôihla≈°ovac√≠ch √∫daj≈Ø neseme odpovƒõdnost pouze my</li>
                            <li>Aplikaci pou≈æ√≠v√°te na vlastn√≠ riziko</li>
                        </ul>
                        
                        <h4>üìû Kontakt</h4>
                        <p>Pro ot√°zky ohlednƒõ ochrany osobn√≠ch √∫daj≈Ø nebo fungov√°n√≠ aplikace n√°s m≈Ø≈æete kontaktovat prost≈ôednictv√≠m GitHub repository tohoto projektu.</p>
                        
                        <div class="terms-footer">
                            <p><strong>Posledn√≠ aktualizace:</strong> 7. srpna 2025</p>
                            <p><em>Registrac√≠ souhlas√≠te s tƒõmito podm√≠nkami a se zpracov√°n√≠m osobn√≠ch √∫daj≈Ø v souladu s GDPR.</em></p>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-outline" id="declineTerms">Nesouhlas√≠m</button>
                    <button class="btn btn-primary" id="acceptTerms">Souhlas√≠m s podm√≠nkami</button>
                </div>
            </div>
        </div>

        <!-- STATUS SECTION -->
        <div class="auth-status">
            <div class="server-status" id="serverStatus">
                <span class="status-indicator" id="statusIndicator">üî¥</span>
                <span class="status-text" id="statusIndicatorText">Offline</span>
                <span class="status-mode" id="statusMode">Local Mode</span>
            </div>
        </div>

        <!-- API Test Section (for debugging) -->
        <div style="position: fixed; bottom: 10px; right: 10px; z-index: 1000; background: rgba(40, 44, 52, 0.95); border: 1px solid #61dafb; border-radius: 8px; padding: 10px; font-family: 'Segoe UI', sans-serif; box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                <div class="status-indicator" id="loginStatusIndicator" style="padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: bold;">üîç API Status</div>
                <button id="testAuthBtn" style="background: #61dafb; color: #282c34; border: none; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: bold; cursor: pointer;">üß™ Test API</button>
            </div>
            <div id="testAuthResults" style="display: none; max-height: 200px; overflow-y: auto; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 10px; color: #e4e4e4; line-height: 1.4;"></div>
        </div>

        <!-- NOTIFICATIONS -->
        <div id="notifications" class="notifications-container"></div>
    </div>

    <!-- Scripts -->
    <script src="../../shared/logger.js"></script>
    <script src="../../shared/navigation.js"></script>
    <script src="../../shared/api-client.js?v=20250807-login"></script>
    <script src="login.js"></script>
</body>
</html>
